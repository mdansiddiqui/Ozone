<form [formGroup]="MapForm" (ngSubmit)="onSubmit()">
<section class="content-header pt-0 pb-0 mt-0 mx-0 mb-0 md-0">
    <div class="container-fluid mx-0 px-0 mx-0 mb-0">

        <div class="row md-0 mb-1 mt-0">
            <div class="col-sm-12 px-0">
                <div class="alert alert-info alert-dismissible">
                    <h6>MASTER SETUP / Mapping Standard With Document</h6>
                </div>
            </div>
        </div>
    </div>
</section>

    <section class="content-header pt-0 pb-0 mt-3 mx-0 mb-0 md-0">
        <div class="container-fluid">
            <div class="card">
                <div class="card-header">
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="container-fluid mb-2">
                                <div class="row mx-2">
                                    <!-- Document Type Dropdown -->
                                    <div class="col-md-4">
                                        <label class="mb-0" for="DocumentTypeId">Document Type</label>
                                        <select class="form-control form-control-sm col-md-12" formControlName="DocumentTypeId"
                                            required [ngClass]="{
                                                'is-invalid': submitted && f.DocumentTypeId.errors
                                            }" id="DocumentTypeId">
                                            <option *ngFor="let item of DocumentsTypeList" [value]="item.id">
                                                {{ item.name }}
                                            </option>
                                        </select>
                                        <div *ngIf="submitted && f.DocumentTypeId.errors" class="invalid-feedback">
                                            <div *ngIf="f.DocumentTypeId.errors.required">
                                                Document is required
                                            </div>
                                        </div>
                                    </div>
                                    <!-- visit Level Dropdown  -->
                                    <div class="col-md-4">
                                        <label class="mb-0" for="VisitLevelId">Visit Level</label>
                                        <select class="form-control form-control-sm col-md-12" formControlName="VisitLevelId"
                                            required [ngClass]="{
                                                'is-invalid': submitted && f.VisitLevelId.errors
                                            }" id="VisitLevelId">
                                            <option *ngFor="let item of VisitLevelList" [value]="item.id">
                                                {{ item.name }}
                                            </option>
                                        </select>
                                        <div *ngIf="submitted && f.VisitLevelId.errors" class="invalid-feedback">
                                            <div *ngIf="f.VisitLevelId.errors.required">
                                                Document is required
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Standard ID Dropdown -->
                                    <div class="col-md-4">
                                        <label class="mb-0" for="StandardId">
                                            {{ "Standards" }}
                                        </label>
                                        <select formControlName="StandardId"
                                            class="form-control form-control-sm col-md-12" id="StandardId" required
                                            [ngClass]="{ 'is-invalid': submitted && f.StandardId.errors }">
                                            <option *ngFor="let item of StandardList" [value]="item.id">
                                                {{ item.name }}
                                            </option>
                                        </select>
                                        <div *ngIf="submitted && f.StandardId.errors" class="invalid-feedback">
                                            <div *ngIf="f.StandardId.errors.required">Standard is required</div>
                                        </div>

                                    </div>
                                        <!-- Required Dropdown  -->
                                        <div class="col-md-4">
                                            <label class="mb-0" for="IsRequired">
                                            {{ "Required" }}
                                        </label>
                                        <select class="form-control form-control-sm col-md-12" formControlName="IsRequired" required
                                        id="IsRequired"
                                        required [ngClass]="{ 'is-invalid': submitted && f.IsRequired.errors }">
                                        <option *ngFor="let item of RequireStatusList" [value]="item.id">
                                        {{ item.name }}
                                        </option>
                                    </select>
                                    <div *ngIf="submitted && f.IsRequired.errors" class="invalid-feedback">
                                        <div *ngIf="f.IsRequired.errors.required">Status is required</div>
                                        </div>
                                    </div>
                                        <!-- Active Dropdown -->
                                        <div class="col-md-4">
                                            <label class="mb-0" for="IsActive">
                                            {{ "Status" }}
                                        </label>
                                        <select class="form-control form-control-sm col-md-12" formControlName="IsActive" required
                                        id="IsActive"
                                        required [ngClass]="{ 'is-invalid': submitted && f.IsActive.errors }">
                                        <option *ngFor="let item of StatusList" [value]="item.id">
                                        {{ item.name }}
                                        </option>
                                    </select>
                                    <div *ngIf="submitted && f.IsActive.errors" class="invalid-feedback">
                                        <div *ngIf="f.IsActive.errors.required">Status is required</div>
                                        </div>
                                    </div>
                                    <!-- <div class="col-md-4">
                                        <label class="mb-0" for="DocumentForReviewer">
                                        {{ "Document For" }}
                                    </label>
                                    <select class="form-control form-control-sm col-md-12" formControlName="DocumentForReviewer" required
                                    id="DocumentForReviewer"
                                    required [ngClass]="{ 'is-invalid': submitted && f.DocumentForReviewer.errors }">
                                    <option *ngFor="let item of documentfor" [value]="item.id">
                                    {{ item.name }}
                                    </option>
                                </select>
                                <div *ngIf="submitted && f.DocumentForReviewer.errors" class="invalid-feedback">
                                    <div *ngIf="f.DocumentForReviewer.errors.required">DocumentForReviewer is required</div>
                                    </div>
                                </div> -->
                                <div class="col-md-4">
                                    <label class="mb-0" for="DocumentForManager">
                                    {{ "Document For" }}
                                </label>
                                <select class="form-control form-control-sm col-md-12" formControlName="DocumentAssignId" required
                                id="DocumentAssignId"
                                required [ngClass]="{ 'is-invalid': submitted && f.DocumentAssignId.errors }">
                                <option *ngFor="let item of documentAssignfor" [value]="item.id">
                                {{ item.name }}
                                </option>
                            </select>
                            <div *ngIf="submitted && f.DocumentAssignId.errors" class="invalid-feedback">
                                <div *ngIf="f.DocumentAssignId.errors.required">Document Assign is required</div>
                                </div>
                            </div>
                                    <!-- Submit Button -->
                                    <div class="col-md-4">
                                        <button type="button"
                                        class="btn-sm btn btn-primary float-right mx-1 px-3 mt-4 pt-2 pb-2"  (click)="NewRecord()">New</button>
                                        <button type="button"
                                            class="btn-sm btn-success btn float-right mx-1 px-3 mt-4 pt-2 pb-2 " (click)="onSubmit()">Submit</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <div class="container-fluid mt-2">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                <div class="card-body table-responsive p-0">
                    <dx-data-grid id="dataGrid"  [rowAlternationEnabled]="true" [showRowLines]="true"
                        [showColumnLines]="true" [allowColumnReordering]="true" [dataSource]="GridData | paginate
                        : {
                            id: 'server',
                            itemsPerPage: this.pagedDto.pageSize,
                            currentPage: this.pagedDto.page
                        }"
                        keyExpr="id" >
                        <dxo-search-panel [visible]="true" [width]="240" placeholder="Search...">
                        </dxo-search-panel>
                        <!-- totalItems: this.totalCount -->
                        <dxo-scrolling mode="virtual"></dxo-scrolling>
                        <dxi-column   dataField="standardName"
                        caption="Standard Name" ></dxi-column>

                        <dxi-column   dataField="visitLevelName"
                        caption="Visit Level Name" ></dxi-column>

                         <dxi-column   dataField="documentName"
                        caption="Document Name"></dxi-column>
                        <dxi-column   dataField="isActive"
                        caption="IsActive"></dxi-column>
                        <dxi-column   dataField="isRequired"
                        caption="IsRequired"></dxi-column>
                        <dxi-column   dataField="documentAssignName"
                        caption="Document Assign For"></dxi-column>
                        
                          <dxi-column type="buttons"caption="Action"  >
                            <dxi-button   icon="edit"

                            [(visible)]="isAddShown"
                            [onClick]="editMSWD"
                            ></dxi-button>

                            <dxi-button   icon="deleterow"
                            [(visible)]="isAddShown"
                            [onClick]="deleteMWSD"
                            ></dxi-button>
                          </dxi-column>
                    </dx-data-grid>
                    <div class="card-footer table-card-footer pb-0 border-top">
                        <div class="row">
                            <div class="col-sm-2 col-12 text-sm-left text-center">
                                <button class="btn btn-sm">
                                    <i class="fas fa-redo text-info"(click)="reloadGrid()"></i>
                                </button>
                            </div>
                            <div class="col-sm-6 col-12">
                            </div>
                            <div class="col-sm-4 col-12">
                                <pagination-controls id="server" (pageChange)="onTableDataChange($event)">
                                </pagination-controls>
                            </div>
                        </div>
                    </div>
                </div>
            </div></div>
        </div>
    </div>
  </form>

