<form [formGroup]="ConsultantForm" #consultant="ngForm">

  <section class="content-header pt-0 pb-0 mt-0 mx-0 mb-0 md-0">
    <div class="container-fluid mx-0 px-0 mx-0 mb-0">
      <div class="row md-0 mb-1 mt-0">
        <div class="col-sm-12 px-0">
          <div class="alert alert-info alert-dismissible">
            <h6>MASTER SETUP / CONSULTANT</h6>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="content pt-0 pb-0 mt-3 mx-2 mb-0 md-0">
    <div class="container-fluid">
      <div class="card">
        <div class="card-header">
          <div class="row">
            <div class="col-sm-12">
              <div class="row mx-2">

                <div class="col-md-4">
                  <label class="mb-0" for="Code">Code</label>
                  <input type="text" formControlName="Code" class="form-control form-control-sm col-md-12" id="Code"
                    placeholder="Code" />
                </div>

                <div class="col-md-4">
                  <label class="mb-0" for="PrefixId">
                    {{ "Prefix" }}
                  </label>
                  <select class="form-control form-control-sm col-md-12 " formControlName="PrefixId" id="PrefixId"
                    required [ngClass]="{ 'is-invalid': submitted && f.PrefixId.errors }">
                    <option *ngFor="let item of PrefixList" [value]="item.id">
                      {{ item.name }}
                    </option>
                  </select>
                  <div *ngIf="submitted && f.PrefixId.errors" class="invalid-feedback">
                    <div *ngIf="f.PrefixId.errors.required">Prefix is required</div>
                  </div>
                </div>

                <div class="col-md-4">
                  <label class="mb-0" for="Name">Name</label>
                  <input type="text" formControlName="Name" class="form-control form-control-sm col-md-12" id="Name"
                    placeholder="FullName" required [ngClass]="{ 'is-invalid': submitted && f.Name.errors }">

                  <div *ngIf="submitted && f.Name.errors" class="invalid-feedback">
                    <div *ngIf="f.Name.errors.required"> Name is required</div>
                  </div>
                </div>

              </div>


              <div class="row  mt-1 mx-2">

                <div class="col-md-4">
                  <label class="mb-0" for="Email">Email</label>
                  <input type="text" formControlName="Email" class="form-control form-control-sm col-md-12" id="Email"
                    placeholder="Email Address" required [ngClass]="{ 'is-invalid': submitted && f.Email.errors }">
                  <div *ngIf="submitted && f.Email.errors" class="invalid-feedback">
                    <div *ngIf="f.Email.errors.required">Email is required</div>
                  </div>
                </div>

                <div class="col-md-4">
                  <label class="mb-0" for="PhoneNumber">Phone Number</label>
                  <input type="text" formControlName="PhoneNumber" class="form-control form-control-sm col-md-12"
                    id="PhoneNumber" placeholder="Phone Number" required
                    [ngClass]="{ 'is-invalid': submitted && f.PhoneNumber.errors }" />
                  <div *ngIf="submitted && f.Email.errors" class="invalid-feedback">
                    <div *ngIf="f.PhoneNumber.errors.required">PhoneNumber is required</div>
                  </div>
                </div>

                <div class="col-md-4">
                  <label class="mb-0" for="TellNumber">Tell Number</label>
                  <input type="text" formControlName="TellNumber" class="form-control form-control-sm col-md-12"
                    id="TellNumber" placeholder="Tell-Number" />
                </div>

              </div>


              <div class="row  mt-1 mx-2">

                <div class="col-md-4">
                  <label class="mb-0" for="CountryId">
                    {{ "Country" }}
                  </label>
                  <select class="form-control form-control-sm col-md-12 " formControlName="CountryId" id="CountryId"
                    required [ngClass]="{ 'is-invalid': submitted && f.CountryId.errors }"
                    (change)="loadState($event.target.value)">
                    <option *ngFor="let item of CountryList" [value]="item.id">
                      {{ item.name }}
                    </option>
                  </select>
                  <div *ngIf="submitted && f.CountryId.errors" class="invalid-feedback">
                    <div *ngIf="f.CountryId.errors.required">Country is required</div>
                  </div>
                </div>

                <div class="col-md-4">
                  <label class="mb-0" for="StateId">
                    {{ "State" }}
                  </label>
                  <select class="form-control form-control-sm col-md-12 " formControlName="StateId" id="StateId"
                    required [ngClass]="{ 'is-invalid': submitted && f.StateId.errors }"
                    (change)="loadCities($event.target.value)">
                    <option *ngFor="let item of StateList" [value]="item.id">
                      {{ item.name }}
                    </option>
                  </select>
                  <div *ngIf="submitted && f.StateId.errors" class="invalid-feedback">
                    <div *ngIf="f.StateId.errors.required">State is required</div>
                  </div>
                </div>

                <div class="col-md-4">
                  <label class="mb-0" for="CityId">
                    {{ "City" }}
                  </label>
                  <select class="form-control form-control-sm col-md-12 " formControlName="CityId" id="CityId" required
                    [ngClass]="{ 'is-invalid': submitted && f.CityId.errors }">
                    <option *ngFor="let item of CityList" [value]="item.id">
                      {{ item.name }}
                    </option>
                  </select>
                  <div *ngIf="submitted && f.CityId.errors" class="invalid-feedback">
                    <div *ngIf="f.CityId.errors.required">City is required</div>
                  </div>
                </div>

              </div>

              <div class="row  mt-1 mx-2">

                <div class="col-md-4">
                  <label class="mb-0" for="Address">Address</label>
                  <input type="text" formControlName="Address" class=" form-control form-control-sm col-md-12"
                    id="Address" placeholder="Address" required
                    [ngClass]="{ 'is-invalid': submitted && f.Address.errors }" />
                  <div *ngIf="submitted && f.Address1.errors" class="invalid-feedback">
                    <div *ngIf="f.Address.errors.required">Address is required</div>
                  </div>
                </div>

                <div class="col-md-4">
                  <label class="mb-0" for="IsActive">
                    {{ "Active Status" }}
                  </label>
                  <select formControlName="IsActive" class="form-control form-control-sm col-md-12" id="IsActive"
                  required [ngClass]="{ 'is-invalid': submitted && f.IsActive.errors }">
                    <option *ngFor="let item of ActiveStatusList" [value]="item.id">
                      {{ item.name }}
                    </option>
                  </select>
                  <div *ngIf="submitted && f.IsActive.errors" class="invalid-feedback">
                    <div *ngIf="f.IsActive.errors.required">Active is required</div>
                  </div>
                </div>

                <div class="col-md-4">
                  <button type="button" class="btn-sm btn btn-primary float-right mx-1 px-4 mt-2 pt-2 pb-2  "
                    (click)="NewRecord()">New</button>
                  <button type="button" class="btn-sm btn-success btn float-right mx-1 px-4 mt-2 pt-2 pb-2 "
                    (click)="onSubmit()">Submit</button>
                </div>

              </div>
              <br><br>
            </div>
          </div>
        </div>
      </div>

    </div>


    <div class="container-fluid mt-2">
      <div class="row">
        <div class="col-md-12">
          <div class="card">
            <div class="card-body table-responsive p-0">

              <dx-data-grid id="dataGrid" [rowAlternationEnabled]="true" [showRowLines]="true" [showColumnLines]="true"
                [allowColumnReordering]="true" [dataSource]="ConsultantList | paginate
                      : {
                          id: 'server',
                          itemsPerPage: this.pagedDto.pageSize,
                          currentPage: this.pagedDto.page,
                          totalItems: this.totalCount
                        }" keyExpr="id">
                <dxo-scrolling mode="virtual"></dxo-scrolling>

                <dxo-search-panel [visible]="true" [width]="240" placeholder="Search...">
                </dxo-search-panel>

                <dxi-column dataField="name" caption="Name"></dxi-column>
                <dxi-column dataField="email" caption="Email"></dxi-column>
                <dxi-column dataField="phoneNumber" caption="PhoneNumber"></dxi-column>

                <dxi-column type="buttons" caption="Action">
                  <dxi-button icon="edit" [onClick]="edit" [(visible)]="isAddShown"></dxi-button>
                  <dxi-button icon="deleterow" [onClick]="delete" [(visible)]="isAddShown"></dxi-button>
                </dxi-column>


              </dx-data-grid>
              <div class="card-footer table-card-footer pb-0 border-top">
                <div class="row">
                  <div class="col-sm-2 col-12 text-sm-left text-center">
                    <button class="btn btn-sm">
                      <i class="fas fa-redo text-info" (click)="reloadGrid()"></i>
                    </button>
                  </div>

                  <div class="col-sm-6 col-12">
                  </div>

                  <div class="col-sm-4 col-12">
                    <pagination-controls id="server" (pageChange)="onTableDataChange($event)">
                    </pagination-controls>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </section>
</form>